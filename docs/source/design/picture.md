# 图片管理

## 总设计

- 只允许漫画帖上传图片到服务器。
- 普通帖子允许展示图片，但应由用户自行准备图片的外链。

## 服务器上传图片流程

1. 前端组件上传图片发送至后端。
   - 前端通过 formdata 流式将图片传输给后端。
2. 后端压缩并转换图片为 AVIF 格式，同时生成 Filename。
3. 后端调用 AWS SDK 将 AVIF 格式的图片上传到 S3。
4. 后端拼接 location 返回前端。
   - 前端接收到的 json: `{ data: { addr: https://xxx.xxx/xxx.avif } }`。
